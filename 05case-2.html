<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		.success {
			color: green;
		}

		.error {
			color: red;
		}
	</style>
</head>
<body>
	<form action="">
		<ul>
			<li>用户名: 
				<input type="text" id="name"><span class="success"></span>
			</li>
			<li>密　码: <input type="password"></li>
			<li><input type="submit" value="注册"></li>
		</ul>
	</form>
	<script>
		var username = document.querySelector('#name');
		var span = document.querySelector('span');

		username.addEventListener('blur', function () {
			var xhr = new XMLHttpRequest;

			xhr.open('get', './checkname.php?name=' + username.value);

			xhr.send();

			xhr.onreadystatechange = function () {
				if(xhr.readyState == 4) {
					if(xhr.responseText == '用户已存在') {
						span.className = 'error';
					} else {
						span.className = 'success';
					}
					span.innerHTML = xhr.responseText;
				}
			}
		})
	</script>
</body>
</html>